<!DOCTYPE html>
<html>
<body>
<header>
<head>
  <title><%= title %></title>
  <meta charset="UTF-8"/>
	<link rel="stylesheet" href="stylesheets/bootstrap.min.css" media="screen">
	<script type="text/javascript" src="javascripts/jquery.min.js"></script>

  <style type="text/css">
    body,html{height:100%;background-color: rgb(246,246,246);}

    .panels {
      position: absolute;
      min-height: 100vh;
      overflow: hidden;
      display: flex;
      width:1000px;
      margin: auto;
      top: 90px;
      left: 0;
      right: 0;
      box-shadow: #6666 0px 0px 5px;
      background: white;
    }
    .he {
      background-color:white;
      color:white;
      position:fixed;
      width:100%;
      height: 75px;
      line-height: 5%;
      top:0px;
      left: 0px;
      text-align:right;
      z-index:999;
      box-shadow: #6666 0px 0px 5px;
    }
    .ti{
      font-weight: 300;
    	font-size: 3.5em;
    	padding-top: 0.75em;
    	text-align:center;
    	color:rgb(60,133,247);
    }
    .lr{
      font-weight: 325;
    	font-size: 1.2em;
    	color:rgb(60,133,247);
    	padding:0.3em;
    }
    .flowerSvg{
      position: fixed;
      width: 75px;
      height: 75px;
      z-index: 1000;
    }
    .msg{
      position: relative;
      width: 300px;
      height:100px;
      background: rgb(60,133,247);
      opacity:0;
      z-index: 9999;
      /*border-radius: 5px;*/
      text-align: justify;
      font-size: 20px;
      font-weight: 250;
      top:100px;
      box-shadow: #666 0px 0px 5px;
      left: 50px;
      transform: scale3d(0.3,0.3,0.3);
      word-wrap:break-word;
      color: white; 
    }
    .msg.open{
      transition: 
        opacity 0.7s cubic-bezier(0.61,-0.19, 0.7,-0.11);
      opacity: 0.7;
      animation: mymove 1s;
      animation-fill-mode: forwards;
      -webkit-animation:mymove 1s; /*Safari and Chrome*/
      -webkit-animation-fill-mode: forwards;
    }

    .msg p{
      padding: 10px;
    }
    @keyframes mymove {
 /*     0%{
        transform: scale3d(0.9,0.9,0.9);
      }
      75%{
        transform: scale3d(1.2,1.2,1.2);
      }*/
      100%{
        transform: scale3d(1,1,1);
      }
    }
    /*Safari and Chrome*/
    @-webkit-keyframes mymove 
    {
/*      0%{
        transform: scale3d(0.9,0.9,0.9);
      }
      75%{
        transform: scale3d(1.2,1.2,1.2);
      }*/
      100%{
        transform: scale3d(1,1,1);
      }
    }
    </style>

    <div class="he">
      <p class="ti"><%= title %></p>
      <a id="headlogin" class="lr" onclick="Loginfunction()">Login</a>
      <a class="lr" href="/">MainPage</a>
      <a class="lr" href="/home">Home</a>
      <a class="lr" href="/logout">Logout</a>
    </div>
    <div>
      <embed class="flowerSvg" src="SVG/flower.svg" width="300" height="100" 
      type="image/svg+xml"
      pluginspage="http://www.adobe.com/svg/viewer/install/" />
    </div>
    <div id="msg" class="msg">
      <p id="msgContent">how old are you? are you happy? good to see you!</p>
    </div>
  </head>
  <script type="text/javascript">

    const msg = document.getElementById('msg');

    var i = 500;
    var sM = 1;
    var int;
    function autoRequest(serverUrl, itvl,sendMsg){

      function msgShow(msgC){
        msg.classList.toggle('open');
        document.getElementById("msgContent").innerText = msgC;
        setTimeout(function(){
          msg.classList.toggle('open');
        },3000);
      }

      function requestMsg(urlHeader){
        console.log(urlHeader);
        var data = {"clientMsg":sendMsg};
        $.ajax({ 
          url:urlHeader,
          type:'post',
          data: data,
          success: function(data,status){ 
            if(status == 'success'){
              if(data.show == 1){
                msgShow(data.content);
                
              }
            }
          },
          error: function(data,status){ 
            if(status == 'error'){
              console.log("requestMsg : nothing");
            }
          }
        });
      }
      
      int = setInterval(function(){
        requestMsg(serverUrl);
      },itvl);
    }
    autoRequest("/message",i,sM);

    setTimeout(function(){
      clearInterval(int);
    }, 3000);

  </script>
</header>
